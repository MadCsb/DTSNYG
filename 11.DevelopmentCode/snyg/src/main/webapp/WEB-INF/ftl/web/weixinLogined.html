<!DOCTYPE html>

<html>
<head>

    <script type="text/javascript" src="${rc.contextPath}/js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="${rc.contextPath}/js/jquery.cookie-1.4.1.min.js"></script>
</head>
<body>
<p id="redictUrl" style="display: none">${redictUrl!''}</p>
<form id="redictForm" action="" method="post"></form>
</body>

<script type="text/javascript">
    function doRedictForm()
    {
      $("#redictForm").html(""); //清空redictForm
      var redictUrl =$("#redictUrl").text(); //必须使用隐藏的p标签，通过text获取，才不会因为双引号或特殊字符转义造成信息丢失
      if (redictUrl.indexOf("/") == 0) //如果链接首个字符是/，则去掉
      {
        redictUrl = redictUrl.substring(1);
      }
      var paramIndex = redictUrl.indexOf("?"); //根据问号区分是否有参数
      if(paramIndex != -1) //如果有参数
      {
        $("#redictForm").attr("action",redictUrl.substring(0,paramIndex)); //设置action，method在后通过参数设置也可以
        var paramStr = redictUrl.substring(paramIndex+1);
        var paramArr = paramStr.split("&"); //分割所有参数

        for(var i=0;i<paramArr.length;i++)
        {
          var param = paramArr[i].split("="); //假设内容中没有等于号，分割参数的值和内容
          $("#redictForm").append('<input type=\'hidden\' name=\'' +param[0]+ '\' value=\'' +param[1]+ '\'>'); //保存参数和值
        }
      }else //如果没有参数
      {
        $("#redictForm").attr("action",redictUrl);
      }
      $("#redictForm").submit();
    }

    $( function() {
      if($("#redictUrl").text() == "")
      {
        window.location.href = "${rc.contextPath}/webPersonal.do?method=index";
      }else
      {
        doRedictForm();
      }
    });
</script>
</head>