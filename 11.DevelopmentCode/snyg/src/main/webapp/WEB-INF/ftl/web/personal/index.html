<!DOCTYPE html>
<html>
<head>
	<#include "WEB_PERSONAL_INC_HEAD.html"/>
</head>
<body>
<#include "PersonalTop.html"/>

<div class="buyer_center_list">
	<div class="my_orders clearfix">
		<p class="my_orders_tit clears">
			<span>我的订单</span><a href="webPersonal?method=toOrderList&orderListType=0">查看全部订单</a>
		</p>
		<!-- 有内容显示 -->
		<table>
			<tbody id="orderList">
			</tbody>
		</table>
		<div class="no_content_play vertical_top1 vertical_top01" style="display: none" id="noOrder">
			<i class="iconfont icon-dingdan"></i><span>您买的东西太少了,这里都空空的,快去挑合适的商品吧！</span>
		</div>
	</div>
	<div class="shop_cart_list clearfix">
		<p class="my_orders_tit ">
			<span>购物车</span>
			<a href="webShopcart?method=toQueryShopCartWeb">查看所有商品</a>
		</p>
		<!-- 有内容显示 -->
		<div class="shop_cart_list_div">
			<ul class="shop_cart_list_ul ">

			</ul>
		</div>
	</div>
</div>
<#include "PersonalButton.html"/>
<script>
	$(function () {
    showOrder();
    getShopCartList();
  })
  function showOrder()
	{
    var searchObject = new Object(); //查询对象
    searchObject.userId = "${user.userId!''}";
    searchObject.payTag = "0";
    searchObject.beforePayStatus = "0";
    searchObject.status = ""
    searchObject.backNumS = "";
    var pageEntity = new Object(); //查询 分页对象
    pageEntity.pageNum = 1;
    pageEntity.pageSize = 3; //查询三条订单
    var result = ajaxOrderList(false,searchObject,pageEntity); //同步加载
    var pageInfo = result.pageInfo;
    var orderList = pageInfo.list;
    $("#orderList").html('');
    if (orderList.length == 0)
		{
			$("#noOrder").show();
		}else
		{
      $("#noOrder").hide();
      for(var i=0;i<orderList.length;i++)
			{
			  var orderHtml = '<tr>' +
						'<td class="my_orders_goods">' +
						'<a><img src="${rc.contextPath}/upload/wxpic/'+ orderList[i].thumbPic+'" width="50" height="50"></a>' +
						'</td>' +
						'<td class="place_holder">'+orderList[i].productName+'</td>' +
						'<td class="orders_goods_pri"><p>¥'+orderList[i].money+'</p><p>在线付款</p></td>' +
						'<td class="place_time"><p>'+orderList[i].createTime+'</p></td>' +
						'<td class="order_pay_status">' +
						'<p class="wait_pay bbc_color"><span style="color:#36C">待付款</span></p>' +
						'<p><a onclick="toWebOrderDetail(\''+orderList[i].orderId+'\')" class="pay_order_det" target="_blank">订单详情</a></p>' +
						'</td>' +
						'<td><a onclick="toWebOrderDetail(\''+orderList[i].orderId+'\')" >查看</a></td>' +
						'</tr>';
			  $("#orderList").append(orderHtml);
			}
    }
	}
  function getShopCartList(){
    $.post("webShopcart?method=getShopCartListWeb",{},
				function(data){
					for (var i=0;i<data.length;i++)
					{
						var html = '<li>' +
								'<div class="clearfix">' +
								'<img src="${rc.contextPath}/upload/wxpic/'+ data[i].thumbPic+'" height="50" width="50">' +
								'<a onclick="toWebSellPrice(\''+data[i].priceId+'\')">'+ data[i].productName + ' ' + data[i].priceName +'</a>' +
								'</div>' +
								'<p class="clears cart_look"><a class="bbc_btns" href="webShopcart?method=toQueryShopCartWeb">查看</a></p>' +
								'</li>';
						$(".shop_cart_list_ul").append(html);
					}
    },'json');
  }
</script>
</body>
</html>